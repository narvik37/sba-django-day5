<html>
	<head>
		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

		<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
		<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous"></script>

		<style>
			.outer {
				margin-top: 10px;
			}

			.outer > div  {
				width: 200px;
				height: 200px;
				display: inline-block;
				vertical-align: top;
			}
            #btn_delete{
                background-color: red;
            }
		</style>
	</head>

	<body class="p-3">
		
		<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
			<div class="modal-content">
			  <div class="modal-header">
				<h5 class="modal-title" id="exampleModalLabel"></h5>
				<button type="button" class="close" data-dismiss="modal" aria-label="Close">
				  <span aria-hidden="true">&times;</span>
				</button>
			  </div>

			  <div class="modal-body">
				<input type="text" class="form-control">
			  </div>

			  <div class="modal-footer">
				<button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                <button type="button" class="btn btn-primary" onclick="edit_go();">변경</button>
                <button type="button" class="btn btn-primary" id="btn_delete" onclick="delete_go();">삭제</button>
			  </div>
			</div>
		  </div>
		</div>

		<script>
			var obj_sample;
			
			function hello(){
				//.parent()   -> 선택자의 부모태그를 반환한다.
				//.children() -> 선택자의 자식태그들을 배열로 반환한다.

				$( $( ".outer" ).children()[$( "#my_date" ).val()-1] ).append( "<p class='card-text' onclick='edit( this );'>" +  $( "#my_input" ).val() + "</p>" );
			}
			
			function edit( obj ){
				obj_sample = obj;

				$( "#exampleModal .modal-title" ).html( $( $( $( obj ).parent() ).children()[0] ).html() );
				
				$( "#exampleModal input" ).val( $( obj ).html() );

				$( "#exampleModal" ).modal( "show" );
			}
			
			function edit_go(){
				$( obj_sample ).html( $( "#exampleModal input" ).val() );

				$( "#exampleModal" ).modal( "hide" );
            }
            function delete_go(){
				$( obj_sample ).html( $( "#exampleModal input" ).val() );

				$( "#exampleModal" ).modal( "hide" );
			}
		</script>

		<form class="form-inline">
			<input type="text" id="my_date" class="form-control mr-2" placeholder="날짜">

			<input type="text" id="my_input" class="form-control mr-2" placeholder="할일">
			
			<!-- button type : submit(생략시는 submit) > 폼을 전송한다, button > onclick에 지정되어 있는 함수만 실행. 폼전송은 안한다. -->
			
			<button type="button" class="btn btn-success" onclick="hello();">할일 추가</button>
		</form>

		<div class="outer">
			{% for i in loop %}
			
			<div class="card">
				<div class="card-body">
					<h5 class="card-title">{{i}}일</h5>
				</div>
            </div>
            
			{% endfor %}
			</div>
		</div>
	</body>
</html>